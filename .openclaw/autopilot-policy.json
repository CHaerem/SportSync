{
  "$schema": "https://openclaw.dev/schemas/autopilot-policy/v1.json",
  "version": "1.0.0",
  "mode": "DRY_RUN",

  "allowedPaths": [
    "scripts/**",
    "tests/**",
    "docs/js/**",
    "docs/index.html",
    "docs/*.md"
  ],
  "blockedPaths": [
    ".github/workflows/**",
    ".env*",
    ".git/**",
    "package-lock.json",
    "package.json",
    "mcp-server/**",
    "node_modules/**",
    ".openclaw/**"
  ],

  "maxFilesChanged": 8,
  "maxLinesChanged": 300,

  "riskRules": [
    {
      "pattern": "docs/data/**",
      "risk": "HIGH",
      "action": "SKIP",
      "reason": "Auto-generated by GitHub Actions; never patch directly"
    },
    {
      "pattern": ".github/workflows/**",
      "risk": "HIGH",
      "action": "SKIP",
      "reason": "CI/CD pipeline changes require human review"
    },
    {
      "pattern": "package.json",
      "risk": "HIGH",
      "action": "SKIP",
      "reason": "Dependency changes require human review"
    },
    {
      "pattern": "scripts/**",
      "risk": "LOW",
      "action": "PR",
      "reason": "Fetcher and build scripts are safe to patch"
    },
    {
      "pattern": "tests/**",
      "risk": "LOW",
      "action": "PR",
      "reason": "Test additions/fixes are safe to patch"
    },
    {
      "pattern": "docs/js/**",
      "risk": "MEDIUM",
      "action": "PR",
      "reason": "Frontend code; changes visible to users"
    },
    {
      "pattern": "docs/index.html",
      "risk": "MEDIUM",
      "action": "PR",
      "reason": "Main page; changes visible to users"
    },
    {
      "pattern": "docs/*.md",
      "risk": "LOW",
      "action": "PR",
      "reason": "Documentation updates"
    }
  ],

  "branchPrefix": "autopilot/",
  "commitPrefix": "autopilot:",
  "prLabels": ["autopilot"],

  "modes": {
    "DRY_RUN": {
      "description": "Observe and plan only; no branches, commits, or PRs",
      "canBranch": false,
      "canCommit": false,
      "canPR": false
    },
    "PR_ONLY": {
      "description": "Create PRs for LOW-risk changes; report MEDIUM+ for human review",
      "canBranch": true,
      "canCommit": true,
      "canPR": true,
      "maxRisk": "LOW"
    },
    "SELECTIVE_AUTO": {
      "description": "Auto-merge LOW-risk PRs after CI passes; PR for MEDIUM",
      "canBranch": true,
      "canCommit": true,
      "canPR": true,
      "canAutoMerge": true,
      "maxRisk": "MEDIUM"
    }
  }
}
