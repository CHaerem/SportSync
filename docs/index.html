<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Expires" content="0">
	<meta name="description" content="Personalized sports dashboard with live events for football, golf, tennis, F1, chess, and esports.">
	<meta name="theme-color" content="#667eea">
	<title>SportSync</title>
	<style>
		:root {
			--bg: #ffffff;
			--fg: #111111;
			--muted: #888888;
			--border: #f0f0f0;
			--accent: #667eea;
			--radius: 8px;
			--max-w: 540px;
			--font: system-ui, -apple-system, sans-serif;
		}
		.dark {
			--bg: #000000;
			--fg: #f0f0f0;
			--muted: #666666;
			--border: #1a1a1a;
		}
		* { margin: 0; padding: 0; box-sizing: border-box; }

		body {
			font-family: var(--font);
			background: var(--bg);
			color: var(--fg);
			line-height: 1.5;
			font-size: 16px;
			font-weight: 300;
			-webkit-font-smoothing: antialiased;
		}

		.wrap {
			max-width: var(--max-w);
			margin: 0 auto;
			padding: 24px 16px 64px;
		}

		/* --- Header --- */
		header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			margin-bottom: 24px;
		}
		header h1 {
			font-size: 1.25rem;
			font-weight: 500;
			letter-spacing: -0.02em;
		}
		#themeToggle {
			background: none;
			border: none;
			font-size: 1.1rem;
			cursor: pointer;
			padding: 4px;
			line-height: 1;
		}

		/* --- Brief --- */
		#brief {
			font-size: 0.9rem;
			color: var(--muted);
			margin-bottom: 24px;
			line-height: 1.5;
			font-style: italic;
		}

		/* --- Filter dots --- */
		.filters {
			display: flex;
			gap: 12px;
			margin-bottom: 32px;
			flex-wrap: wrap;
		}
		.filter-dot {
			width: 32px;
			height: 32px;
			border-radius: 50%;
			border: 2px solid var(--border);
			background: transparent;
			cursor: pointer;
			font-size: 0.9rem;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: border-color 0.15s, opacity 0.15s;
			opacity: 0.5;
		}
		.filter-dot:hover { opacity: 0.8; }
		.filter-dot.active {
			opacity: 1;
			border-color: var(--fg);
		}

		/* --- Featured Context --- */
		#featured-context {
			border: 1px solid var(--border);
			border-radius: var(--radius);
			padding: 16px;
			margin-bottom: 32px;
		}
		#featured-context:empty, #featured-context[style*="display: none"] { margin: 0; }
		.ctx-header {
			font-size: 0.8rem;
			font-weight: 500;
			text-transform: uppercase;
			letter-spacing: 0.05em;
			margin-bottom: 12px;
		}
		.ctx-row {
			font-size: 0.85rem;
			color: var(--fg);
			padding: 4px 0;
			font-variant-numeric: tabular-nums;
		}
		.ctx-expand {
			background: none;
			border: none;
			color: var(--muted);
			font-size: 0.8rem;
			cursor: pointer;
			margin-top: 8px;
			padding: 0;
		}
		.ctx-expand:hover { color: var(--fg); }

		/* --- Bands --- */
		.band-label {
			font-size: 0.7rem;
			font-weight: 400;
			text-transform: uppercase;
			letter-spacing: 0.1em;
			color: var(--muted);
			margin-top: 32px;
			margin-bottom: 4px;
			position: sticky;
			top: 0;
			background: var(--bg);
			padding: 8px 0 4px;
			z-index: 10;
		}
		.band-label:first-child { margin-top: 0; }
		.band-divider {
			height: 1px;
			background: var(--border);
			margin-bottom: 8px;
		}

		/* --- Tournament Header --- */
		.tournament-header {
			font-size: 0.8rem;
			font-weight: 400;
			color: var(--muted);
			padding: 8px 0 4px;
		}

		/* --- Event Row --- */
		.event-row {
			padding: 8px 0;
			border-bottom: 1px solid var(--border);
			cursor: pointer;
			transition: background 0.1s;
		}
		.event-row:hover { background: color-mix(in srgb, var(--fg) 3%, transparent); }
		.event-row:last-child { border-bottom: none; }

		.row-main {
			display: flex;
			align-items: center;
			gap: 12px;
			min-height: 28px;
		}
		.row-time {
			font-size: 0.8rem;
			font-weight: 400;
			color: var(--muted);
			min-width: 42px;
			font-variant-numeric: tabular-nums;
			flex-shrink: 0;
		}
		.row-title {
			font-size: 0.9rem;
			font-weight: 400;
			flex: 1;
			min-width: 0;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}
		.row-tournament {
			font-size: 0.75rem;
			color: var(--muted);
			flex-shrink: 0;
			display: none;
		}
		@media (min-width: 400px) {
			.row-tournament { display: inline; }
		}
		.row-dot {
			width: 6px;
			height: 6px;
			border-radius: 50%;
			flex-shrink: 0;
		}

		/* --- Expanded Row --- */
		.row-expanded {
			padding: 12px 0 8px 54px;
			font-size: 0.85rem;
		}
		.exp-venue {
			color: var(--muted);
			margin-bottom: 12px;
			font-size: 0.8rem;
		}

		/* Football teams */
		.exp-teams {
			display: flex;
			align-items: center;
			gap: 24px;
			margin-bottom: 12px;
		}
		.exp-team {
			display: flex;
			align-items: center;
			gap: 8px;
			font-size: 0.85rem;
		}
		.exp-logo {
			width: 32px;
			height: 32px;
			object-fit: contain;
		}
		.exp-logo-placeholder {
			width: 32px;
			height: 32px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.1rem;
		}
		.exp-vs {
			color: var(--muted);
			font-size: 0.75rem;
		}

		/* Golf players */
		.exp-golfers { margin-bottom: 12px; }
		.exp-golfer {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 6px 0;
			border-bottom: 1px solid var(--border);
		}
		.exp-golfer:last-of-type { border-bottom: none; }
		.exp-golfer-info {
			display: flex;
			align-items: center;
			gap: 8px;
		}
		.exp-headshot {
			width: 28px;
			height: 28px;
			border-radius: 50%;
			object-fit: cover;
		}
		.exp-headshot-placeholder {
			width: 28px;
			height: 28px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 0.9rem;
		}
		.exp-tee-time {
			font-size: 0.8rem;
			font-weight: 400;
			color: var(--muted);
			font-variant-numeric: tabular-nums;
		}
		.exp-link {
			display: inline-block;
			margin-top: 8px;
			font-size: 0.8rem;
			color: var(--muted);
			text-decoration: none;
		}
		.exp-link:hover { color: var(--fg); }

		/* Streaming */
		.exp-streaming {
			display: flex;
			gap: 8px;
			margin-bottom: 12px;
			flex-wrap: wrap;
		}
		.exp-stream-badge {
			font-size: 0.75rem;
			color: var(--muted);
			border: 1px solid var(--border);
			border-radius: 12px;
			padding: 2px 10px;
			text-decoration: none;
			display: inline-block;
		}
		.exp-stream-badge:hover {
			border-color: var(--muted);
			color: var(--fg);
		}

		/* Favorite actions */
		.exp-fav-actions {
			display: flex;
			gap: 8px;
			flex-wrap: wrap;
		}
		.exp-fav-btn {
			background: none;
			border: 1px solid var(--border);
			border-radius: 12px;
			padding: 2px 10px;
			font-size: 0.75rem;
			color: var(--muted);
			cursor: pointer;
		}
		.exp-fav-btn:hover {
			border-color: var(--accent);
			color: var(--accent);
		}

		/* --- Later toggle --- */
		.later-toggle {
			background: none;
			border: none;
			color: var(--muted);
			font-size: 0.85rem;
			cursor: pointer;
			padding: 8px 0;
			width: 100%;
			text-align: left;
		}
		.later-toggle:hover { color: var(--fg); }

		/* --- Empty state --- */
		.empty {
			text-align: center;
			color: var(--muted);
			padding: 48px 0;
			font-size: 0.9rem;
		}

		/* --- Loading --- */
		.loading {
			text-align: center;
			padding: 48px 0;
			color: var(--muted);
			font-size: 0.85rem;
		}

		/* --- Reduced motion --- */
		@media (prefers-reduced-motion: reduce) {
			*, *::before, *::after {
				animation-duration: 0.01ms !important;
				transition-duration: 0.01ms !important;
			}
		}

		/* --- Mobile tweaks --- */
		@media (max-width: 380px) {
			.wrap { padding: 16px 12px 48px; }
			.row-title { font-size: 0.85rem; }
			.filter-dot { width: 28px; height: 28px; font-size: 0.8rem; }
		}
	</style>
</head>
<body>
	<div class="wrap">
		<header>
			<h1>SportSync</h1>
			<button id="themeToggle" aria-label="Toggle dark mode">&#127769;</button>
		</header>

		<div id="brief" class="brief"></div>

		<div class="filters" role="navigation" aria-label="Sport filters">
			<button class="filter-dot" data-sport="football" aria-label="Football" title="Football">&#9917;</button>
			<button class="filter-dot" data-sport="golf" aria-label="Golf" title="Golf">&#9971;</button>
			<button class="filter-dot" data-sport="tennis" aria-label="Tennis" title="Tennis">&#127934;</button>
			<button class="filter-dot" data-sport="formula1" aria-label="Formula 1" title="F1">&#127950;&#65039;</button>
			<button class="filter-dot" data-sport="chess" aria-label="Chess" title="Chess">&#9823;&#65039;</button>
			<button class="filter-dot" data-sport="esports" aria-label="Esports" title="Esports">&#127918;</button>
		</div>

		<div id="featured-context" style="display:none;"></div>

		<div id="events">
			<div class="loading">Loading events...</div>
		</div>
	</div>

	<script src="js/sport-config.js?v=2026021001"></script>
	<script src="js/asset-maps.js?v=2026021001"></script>
	<script src="js/sports-api.js?v=2026021001"></script>
	<script src="js/preferences-manager.js?v=2026021001"></script>
	<script src="js/dashboard.js?v=2026021001"></script>

	<script>
		// Register service worker
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', async () => {
				try {
					await navigator.serviceWorker.register('/SportSync/sw.js');
				} catch (e) {
					console.error('SW registration failed:', e);
				}
			});
		}
	</script>
</body>
</html>
